---
title: 'My attempt at HDTR'
date: 2025-02-17
permalink: /posts/2025/22/hdtr_darmstadt/
tags:
  - interests
  - darmstadt
  - photography
  - python
---
<html lang="en">
<head>
    
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

<!--         <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
     -->
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://rawgit.com/susielu/d3-annotation/master/d3-annotation.min.js"></script>
   
    <style>
        .gallery {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two columns */
            grid-gap: 20px;
            max-width: 900px;
            margin-top: 20px;
        }
        .gallery div {
            text-align: center;
        }
        .gallery a {
            display: inline-block;
        }
        .gallery img {
            width: 100%;
            height: auto;
            max-width: 400px;
        }
        .caption {
            font-size: 16px;
            margin-top: 5px;
        }
        .dropdown-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>

        <p>Many years ago I (probably like millions of people before!) had the idea to take the photo of a place over some time period. Now one can merge them in two ways, the first is a straight forward time-lapse and the second is to merge them into a single image with slices coming from each photo. However, like many of my ideas, it remained just that—an idea. I never got around to implementing it. But now, thanks to the super awesome LLMS, I’ve been accelerating my creative process and converting all these dormant ideas into reality with ease.</p>

        <p>I restarted the effort for this earlier this month and when doing some internet-research, I came to know that there is a phrase for this called "High Dynamic Time Ranging (HDTR)" images. I was able to dig out the original image from which I got the actual idea from which is from Eirik Solheim’s year-long time-lapse project (<a href="https://www.eirikso.com/2011/01/04/one-year-in-one-image/" target="_blank">One Year in One Image</a>), where an entire year’s worth of photos is merged into a single image. The results look beautiful! I wish I had such a great sceneary to photograph. </p>

        <p>My next task was to get hold of images of the same spot taken over some time. I dont have access to fancy scenary so I went with what I had which was the apartment balcony with my GoPro. While it technically worked, the results were not the most awe-inspiring. </p>

<p> While searching around the internet, I stumbled upon this excellent HDTR project by Martin Krzywinski on his blog <a href="https://mk.bcgsc.ca/fun/hdtr/?home" target="_blank">here</a>, where he showed how to create insanely awesome images. Infact, most of the code for this project was based on his work. He has an excellent website with so many serious and fun projects. His blogs have become one of my always-open tabs in the last weeks. </p>

<p>Going back, given that I did not have access to great set of photos, I looked to the internet and found this <a href="https://www.foto-webcam.eu/" target="_blank">great</a> website with nearly real-time photos of many places across Europe and specifically three locations in Darmstadt. They even have a history of photos taken every 10 minutes over many years. This was just the missing piece in my HDTR puzzle. My idea was to download the images for a specific day from last year. I choose the spring equinox and downloaded the data for a 24 hour time window starting at 6AM on March 21. Finally, piecing together all of the code and images together, I was able to create similar photos as Martin Krzywinski work (thought they dont have as smooth a transition as his. I was considering running an optimization algorithm with some sort of edge detection code to reduce these "bands"). </p>

<p>The code itself was pretty straight forward: sort the images forward in time, take slices of width w/N where w is the width of each image and N is the total number of images, the slice from image i is positioned at i*w/N. This gives us a first image which is quite good but still has jumps across the image boundary and shows bands as can be seen below. </p>

<p>Next, is a simple spatial averaging where neighbouring images are taken and a weighted average of the slices across the boundary is done. This smoothens some of the boundaries as seen in the image below </p>

<p>Finally, a temporal blending is done by doing a weighted average of the time slices. I played around with the weights and setteled on a large window of averaging. This produces the final processed image. To this, just a few things like the time data is added and like from the original work I added direction of movement just for clarity. By direction of movement, I mean this composition can we done in all four ways: top-to-bottom, bottom-to-top, left-to-right and right-to-left. These images for the three locations in Darmstadt can be seen in collection below. </p>

    <div class="dropdown-container">
        <label for="location-select">Select a Location:</label>
        <select id="location-select" onchange="updateGallery()">
            <option value="luisenplatz">Luisenplatz</option>
            <option value="darmstadt-west">Darmstadt West</option>
            <option value="darmstadt-east">Darmstadt East</option>
        </select>
    </div>

    <div id="gallery-container" class="gallery">
        <!-- Images will be dynamically loaded here -->
    </div>


        <p>Next, was to reuse the same code to create an HDTR image for the entire year. I arbitrarily choose the time of 1PM as time of day and downloaded one photo per day at this time for the entire year of 2024. Now, just like Erik Solheim’s project, I first created the simple banded image and then added the blending techniques as before. As the images themselves were quite large (6000x4150 pixels) the combination of 365 images took quite a while to run. However, I was quite proud of the results. You can check them for all three locations of Darmstadt below.</p>

        <p>For those interested, I’ve made the code available <a href="https://github.com/armandyam/hdtr_photo_creation" target="_blank">here</a> on GitHub, so you can try it out yourself and experiment with different blending techniques. I did have a few more ideas to run some simpler blending algorithm using pillow or may be even something a bit more sophisticaled with edge detection. However, for now I want to move onto a different project before getting back to this.  </p>

    <script>
        const imageSets = {
            "luisenplatz": [
                { src: "/assets/pictures/luisenplatz_left_to_right_temporal.jpeg", caption: "Left to Right" },
                { src: "/assets/pictures/luisenplatz_right_to_left_temporal.jpeg", caption: "Right to Left" },
                { src: "/assets/pictures/luisenplatz_top_to_bottom_temporal.jpeg", caption: "Top to Bottom" },
                { src: "/assets/pictures/luisenplatz_bottom_to_top_temporal.jpeg", caption: "Bottom to Top" }
            ],
            "darmstadt-west": [
                { src: "/assets/pictures/darmstadt_west_left_to_right_temporal.jpeg", caption: "Left to Right" },
                { src: "/assets/pictures/darmstadt_west_right_to_left_temporal.jpeg", caption: "Right to Left" },
                { src: "/assets/pictures/darmstadt_west_top_to_bottom_temporal.jpeg", caption: "Top to Bottom" },
                { src: "/assets/pictures/darmstadt_west_bottom_to_top_temporal.jpeg", caption: "Bottom to Top" }
            ],
            "darmstadt-east": [
                { src: "/assets/pictures/darmstadt_east_left_to_right_temporal.jpeg", caption: "Left to Right" },
                { src: "/assets/pictures/darmstadt_east_right_to_left_temporal.jpeg", caption: "Right to Left" },
                { src: "/assets/pictures/darmstadt_east_top_to_bottom_temporal.jpeg", caption: "Top to Bottom" },
                { src: "/assets/pictures/darmstadt_east_bottom_to_top_temporal.jpeg", caption: "Bottom to Top" }
            ]
        };

        function updateGallery() {
            const location = document.getElementById("location-select").value;
            const galleryContainer = document.getElementById("gallery-container");
            galleryContainer.innerHTML = ""; 

            imageSets[location].forEach(imgData => {
                const imgDiv = document.createElement("div");
                const imgLink = document.createElement("a");
                const imgElement = document.createElement("img");
                const captionDiv = document.createElement("div");

                imgLink.href = imgData.src; 
                imgLink.target = "_blank"; 
                
                imgElement.src = imgData.src;
                imgElement.alt = imgData.caption;
                imgElement.classList.add("gallery-img");

                captionDiv.textContent = imgData.caption;
                captionDiv.classList.add("caption");

                imgLink.appendChild(imgElement);
                imgDiv.appendChild(imgLink);
                imgDiv.appendChild(captionDiv);
                galleryContainer.appendChild(imgDiv);
            });
        }

        document.addEventListener("DOMContentLoaded", updateGallery);
    </script>

</body>
</html>



