---
title: 'Carbon cost of travelling'
date: 2024-08-01
permalink: /posts/2024/08/travel/
tags:
  - travel
  - environment
---

## Carbon Cost of Travelling

This visualization shows flight routes across the world and calculates the carbon impact of each trip.

<div id="my_dataviz" style="width:800px; height:600px;"></div>

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>

<script>

  // The svg
  var svg = d3.select("#my_dataviz")
      .append("svg")
      .attr("width", 800)
      .attr("height", 600);

  var width = 800, height = 600;

  // Map and projection
  var projection = d3.geoNaturalEarth1()  // Use Natural Earth projection
      .scale(150)  // Adjust the scale for better visualization
      .translate([width / 2, height / 2]);

  // A path generator
  var path = d3.geoPath().projection(projection);

  // Load world shape AND list of connection
  d3.queue()
    .defer(d3.json, "https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson")  // World shape
    .defer(d3.csv, "/assets/data/flights.csv") // Flight data
    .await(ready);

  function ready(error, dataGeo, data) {
      if (error) throw error;

      // Reformat the list of links (source to destination)
      var link = [];
      data.forEach(function(row){
        var source = [+row.DepLon, +row.DepLat];
        var target = [+row.ArrLon, +row.ArrLat];
        var topush = {type: "LineString", coordinates: [source, target]};
        link.push(topush);
      });

      // Draw the map
      svg.append("g")
          .selectAll("path")
          .data(dataGeo.features)
          .enter().append("path")
              .attr("fill", "#b8b8b8")
              .attr("d", d3.geoPath().projection(projection))
              .style("stroke", "#fff")
              .style("stroke-width", 0.5);

      // Add flight paths
      svg.selectAll("myPath")
        .data(link)
        .enter()
        .append("path")
          .attr("d", function(d){ return path(d); })
          .style("fill", "none")
          .style("stroke", "#69b3a2")
          .style("stroke-width", 2);
  }

</script>
